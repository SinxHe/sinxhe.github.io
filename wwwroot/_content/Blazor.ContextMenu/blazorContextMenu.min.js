"use strict";var blazorContextMenu=function(d){var l=null,l=window.Element&&!Element.prototype.closest?function(e,t){var n,r=(e.document||e.ownerDocument).querySelectorAll(t);do{for(n=r.length;0<=--n&&r.item(n)!==e;);}while(n<0&&(e=e.parentElement));return e}:function(e,t){return e.closest(t)},f=[];function u(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function t(e,t){var o=null;return function e(t,n,r){for(var i=0;i<t.children.length&&!r;i++){if(t.children[i].classList.contains(n)){r=!0,o=t.children[i];break}if(r)break;e(t.children[i],n,r)}}(e,t,!1),o}function s(e,t){var i=new Array;return function e(t,n){for(var r=0;r<t.children.length;r++)t.children[r].classList.contains(n)&&i.push(t.children[r]),e(t.children[r],n)}(e,t),i}function o(e,t,n){var r=u();f.push({id:t,target:n,instanceId:r}),e.dataset.instanceId=r}var a=null,c=(d.SetMenuHandlerReference=function(e){a=a||e},d.ManualShow=function(e,t,n){var r=document.getElementById(e);if(!r)throw new Error("No context menu with id '"+e+"' was found");o(r,e,null),c(r,e,t,n,null,null)},d.OnContextMenu=function(e,t,n){var r=document.getElementById(t);if(!r)throw new Error("No context menu with id '"+t+"' was found");o(r,t,e.target);var i=JSON.parse(e.currentTarget.dataset.dotnetref);return c(r,t,e.x,e.y,e.target,i),e.preventDefault(),n&&e.stopPropagation(),!1},function(e,t,n,r,i,o){return d.Show(t,n,r,i,o).then(function(){return i=function(){return 0<e.clientWidth},o=1e3,new Promise(function(e,t){var n=new Date,r=setInterval(function(){i()?(clearInterval(r),e()):new Date-n>o&&(clearInterval(r),t())},20)});var i,o}).then(function(){0<e.offsetLeft+e.clientWidth-window.innerWidth&&(e.style.left=e.offsetLeft-e.clientWidth+"px"),0<e.offsetTop+e.clientHeight-window.innerHeight&&(e.style.top=e.offsetTop-e.clientHeight+"px")})}),h=(d.Init=function(){function t(e,t){if(0<f.length)for(var n=0;n<f.length;n++){var r=f[n],i=document.getElementById(r.id);i&&"true"==i.dataset.autohide&&i.dataset.autohideevent==t&&!i.contains(e.target)&&d.Hide(r.id)}}document.addEventListener("mouseup",function(e){t(e,"mouseup")}),document.addEventListener("mousedown",function(e){t(e,"mousedown")}),window.addEventListener("resize",function(){if(0<f.length)for(var e=0;e<f.length;e++){var t=f[e],n=document.getElementById(t.id);n&&"true"==n.dataset.autohide&&d.Hide(t.id)}},!0)},d.Show=function(e,t,n,r,i){var o=null;return r&&(r.id||(r.id=u()),o=r.id),a.invokeMethodAsync("ShowMenu",e,t.toString(),n.toString(),o,i)},d.Hide=function(e){var i=document.getElementById(e),o=i.dataset.instanceId;return a.invokeMethodAsync("HideMenu",e).then(function(e){if(i.classList.contains("blazor-context-menu")&&e){e=f.find(function(e){return e.instanceId==o});if(e)for(var t=f,n=e,r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}})},d.IsMenuShown=function(e){var t=document.getElementById(e).dataset.instanceId,e=f.find(function(e){return e.instanceId==t});return void 0!==e&&null!=e},null);return d.OnMenuItemMouseOver=function(e,u,a){var c;l(e.target,".blazor-context-menu__wrapper")==l(a,".blazor-context-menu__wrapper")&&"true"==a.getAttribute("itemEnabled")&&(c=t(a,"blazor-context-submenu"))&&(h=setTimeout(function(){h=null;var r=l(a,".blazor-context-menu__wrapper"),o=r.children[0],e=l(a,".blazor-context-menu"),t=a.getBoundingClientRect(),n=t.left+r.clientWidth-u,t=t.top,i=e.dataset.instanceId,e=f.find(function(e){return e.instanceId==i});d.Show(c.id,n,t,e.target).then(function(){0<c.offsetLeft+c.clientWidth-window.innerWidth&&(c.style.left=c.offsetLeft-c.clientWidth-r.clientWidth-u+"px");for(var e=c.offsetTop+c.clientHeight-window.innerHeight,i=(0<e&&(c.style.top=c.offsetTop-e+"px"),function(){for(var e=s(a,"blazor-context-submenu"),t=e.length;t--;){var n=e[t];d.Hide(n.id)}for(t=o.children.length;t--;){var r=o.children[t];r!=a&&r.removeEventListener("mouseover",i)}}),t=o.children.length;t--;){var n=o.children[t];n!=a&&n.addEventListener("mouseover",i)}})},200))},d.OnMenuItemMouseOut=function(e){h&&clearTimeout(h)},d.RegisterTriggerReference=function(e,t){e&&(e.dataset.dotnetref=JSON.stringify(t.serializeAsArg()))},d}({});blazorContextMenu.Init();